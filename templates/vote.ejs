<!DOCTYPE html>
<html lang="en">
  <head>
	<meta charset="UTF-8" />
	<title>Vote</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <style>
	fieldset {
	  /*border: 5px solid #000; /* Solid black border */
	  border-radius: 15px; /* Rounded corners */
	  padding: 20px; /* Padding inside the fieldset */
	  /* Margin for spacing around the fieldset */
	}
	.group1,
	.group2 {
	  background: #ff747c;
	  border-radius: 49px;
	  text-align: center;
	  position: relative; /* This is required if you want to use 'left' property */
	}

	.group1 {
	  width: 154px;
	}
	.top-right {
	  position: absolute; /* or 'fixed' if you want it to stay at the top right when scrolling */
	  top: 20px;
	  right: 100px;
	  font-size: 20px;
	  margin: 10px; /* Optional: to give some space from the edges */
	}
	.group2 {
	  left: 284px;
	  width: 248px;
	}

	input[type="button"],
	input[type="submit"] {
	  width: 100%;
	  height: 48px; /* Set a specific height */
	  background: inherit;
	  border: none;
	  border-radius: inherit;
	  color: black;
	  font-size: 20px;
	  cursor: pointer;
	}

	input[type="button"]:hover,
	input[type="submit"]:hover {
	  background-color: #ff6268; /* Darker shade on hover */
	}

	input[type="text"] {
	  /* Make inputs block elements to take full width */
	  margin: 10px 0; /* Margin for spacing between inputs */
	  /* Padding inside the inputs */
	  border: 1px solid #ccc; /* Light grey border for the inputs */
	  border-radius: 5px; /* Slightly rounded corners for the inputs */
	}

	img {
		height: 20rem;
	}
  </style>
  <script defer>
	window.onload = async function() {
		const resp = await fetch("https://pokeapi.co/api/v2/pokemon/?limit=1000");
		const json = await resp.json()

		const pokemonSelector = document.getElementById("currPokemon");
		options = "<>";
		json.results.map((pokemon) => {
			options += `<option value='${pokemon.name}'>${pokemon.name}</option>`
		})

		pokemonSelector.innerHTML = options;

	}

	async function loadPokemonDetails() {
		const pokemonName = document.getElementById("currPokemon").value;
		const pokemonSearch = document.getElementById("searchPokemon").value;

		const image = document.getElementById("currPokemonImage");
		const title = document.getElementById("currPokemonName");


		let resp = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonName}`)
		let searchResp = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonSearch}`);
		let pokemonData;

		if (pokemonSearch.length > 0) {
			if (!(await searchResp.ok)) {
				window.alert("Please enter a valid Pokemon name, or leave the search field empty to choose from the list.")
			} else {
				pokemonData = await searchResp.json()
				image.src = pokemonData.sprites.other['official-artwork'].front_default;
				title.innerHTML = pokemonData.name;
			}
		} else {
			pokemonData = await resp.json()
			image.src = pokemonData.sprites.other['official-artwork'].front_default;
			title.innerHTML = pokemonData.name;
		}

		

	}

  </script>
  <body>
	<h1>Vote!</h1>
	<div class="top-right">
	  <a href="/">Home</a>
	  &nbsp;
	  <a href="/tierlist">Tier List</a>
	</div>

	<p>Fill out this form and cast your vote.</p>
	<form>
	  <fieldset>
		<legend>Details</legend>
		Firstname:
		<input type="text" placeholder="Ash" name="firstname" id="firstnamt" />
		<br />
		Lastname:
		<input
		  type="text"
		  placeholder="Ketchum"
		  name="lastname"
		  id="lastname"
		/>
		<br />
		UID:
		<input type="text" placeholder="696969696" name="uid" id="uid" />
	  </fieldset>
	  <br />
	  <fieldset>
		<legend>Pokemon</legend>
		Name:
		<select name="currPokemon" id="currPokemon">
		  <option value="Pikachu">Pikachu</option>
		</select>
		OR <br /><br />
		Search:
		<input
		  type="text"
		  placeholder="Pikachu"
		  name="searchPokemon"
		  id="searchPokemon"
		/>
		<br /><br />
		<div class="group1">
		  <input type="button" value="Load Pokemon!" onclick="loadPokemonDetails()"/>
		</div>
	  </fieldset>
	  <img
		src="/randImageStarter.png"
		id="currPokemonImage"
	  />
	  <p id="currPokemonName">Choose a Pokemon!</p>
	  <br />
	  <div class="group2">
		<input type="submit" value="Cast my vote!" />
	  </div>
	</form>
  </body>
</html>
